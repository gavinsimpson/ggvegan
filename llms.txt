# ggvegan; ggplot2-based plots for vegan

## What is ggvegan?

*ggvegan* is a package for the R statistical software and environment.
It aims to implement *ggplot*-based versions of the plots produced by
the *vegan* package. Initially, *ggvegan* provides
[`fortify()`](https://ggplot2.tidyverse.org/reference/fortify.html) and
[`autoplot()`](https://ggplot2.tidyverse.org/reference/autoplot.html)
methods for objects created in *vegan*, with the aim of providing full
replacement plots via
[`autoplot()`](https://ggplot2.tidyverse.org/reference/autoplot.html).
The [`fortify()`](https://ggplot2.tidyverse.org/reference/fortify.html)
methods allow the data contained within objects created by *vegan* to be
converted into a format suitable for use with `ggplot()` directly.

## Licence

*ggvegan* is released under the [GNU General Public Licence, version
2](https://www.r-project.org/Licenses/GPL-2).

## Development & contributions

*ggvegan* uses the *roxygen2* system to document package functions
alongside the code itself.

*ggvegan* is very much beta code at the moment. Comments and feedback on
the approach taken are welcome, as are code contributions. See **Design
decisions** below for some important areas for consideration.

## Design decisions

### `autoplot()`

The
[`autoplot()`](https://ggplot2.tidyverse.org/reference/autoplot.html)
concept is somewhat poorly defined at the moment — at least in public. I
have taken it to mean that a full ggplot object is returned, which can
then be augmented with additional layers and changes to the scales etc.
This means that the aesthetics for the scores are hard-coded in the
[`autoplot()`](https://ggplot2.tidyverse.org/reference/autoplot.html)
methods. If you want greater control over these aesthetics, use
[`fortify()`](https://ggplot2.tidyverse.org/reference/fortify.html) to
return the scores in a suitable format and build the plot up yourself. I
hope to include at least one example of this, where applicable, in the
help pages for each
[`autoplot()`](https://ggplot2.tidyverse.org/reference/autoplot.html)
method.

### `fortify()`

[`fortify()`](https://ggplot2.tidyverse.org/reference/fortify.html)
methods are supposed to return a data frame but this is not necessarily
the most convenient representation for vegan’s ordination objects where
several data frames representing the various sets of ordination scores
would be more natural. Currently, *ggvegan* follows the existing
[`fortify()`](https://ggplot2.tidyverse.org/reference/fortify.html)
convention of returning a single data frame so returns the ordination
scores in long format with variables `score` indicating the type of
score and `label` the label/rowname for each score.

#### Standard ordination methods

The first two columns will now be `score` and `label`. The remaining
columns will be the requested ordination dimensions, named as per the
`scores` method from **vegan**. For example, a PCA will have columns
named `pc1`, `pc2`, etc. How many and their numbering depending on the
`axes` argument; the default is `1:6`.

A further design decision is that *ggvegan*’s
[`fortify()`](https://ggplot2.tidyverse.org/reference/fortify.html)
methods for ordination objects will return all possible sets of scores
by default, but the set returned can not be chosen by the user using the
`layers` argument. Additionally, the sets of scores to be plotted can be
chosen at the
[`autoplot()`](https://ggplot2.tidyverse.org/reference/autoplot.html)
stage.

#### More specialised objects

The components returned for more specialised objects will typically vary
as needed for a sensible, tidy data representation. Such
[`fortify()`](https://ggplot2.tidyverse.org/reference/fortify.html)
methods will return suitable components. For example,
[`fortify.prc()`](https://gavinsimpson.github.io/ggvegan/reference/fortify.prc.md)
returns components `time`, `treatment`, and `response` corresponding to
the two-way factors defining the experiment and the regression
coefficients on RDA axis 1 respectively.

## Status

The following `autoplot` methods are currently available

1.  `autoplot.cca` — for objects of classes `"cca"` and `"capscale"`
2.  `autoplot.rda` — for objects of class `"rda"`
3.  `autoplot.metaMDS` — for objects of class `"metaMDS"`
4.  `autoplot.prc` — for objects of class `"prc"`
5.  `autoplot.decorana` — for objects of class `"decorana"` (AKA DCA)
6.  `autoplot.prestonfit` — for objects of class `"prestonfit"`
7.  `autoplot.fisherfit` — for objects of class `"fisherfit"`
8.  `autoplot.envfit` — for objects of class `"envfit"`
9.  `autoplot.isomap` — for objects of class `"isomap"`
10. `autoplot.permustats` — for objects of class `"permustats"`
11. `autoplot.poolaccum` — for objects of class `"poolaccum"`
12. `autoplot.anosim` — for objects of class `"anosim"`
13. `autoplot.vegan_pco` — for objects of class `"vegan_pco"`
14. `autoplot.dbrda` — for objects of class `"dbrda"`

The following `fortify` method are currently available

1.  `fortify.cca` — for objects of classes `"cca"`, and `"capscale"`
2.  `fortify.rda` — for objects of classes `"rda"`
3.  `fortify.metaMDS` — for objects of class `"metaMDS"`
4.  `fortify.prc` — for objects of class `"prc"`
5.  `fortify.decorana` — for objects of class `"decorana"` (AKA DCA)
6.  `fortify.prestonfit` — for objects of class `"prestonfit"`
7.  `fortify.fisherfit` — for objects of class `"fisherfit"`
8.  `fortify.anosim` — for objects of class `"anosim"`
9.  `fortify.isomap` — for objects of class `"isomap"`
10. `fortify.permustats` — for objects of class `"permustats"`
11. `fortify.poolaccum` — for objects of class `"poolaccum"`
12. `fortify.renyiaccum` — for objects of class `"renyiaccum"`
13. `fortify.vegan_pco` — for objects of class `"vegan_pco"`
14. `fortify.dbrda` — for objects of class `"dbrda"`

## Installation

You can install ggvegan directly from GitHub using functions that the
**remotes** package provides. To do this, install **remotes** from CRAN
via

``` r
install.packages("remotes")
```

then run

``` r
remotes::install_github("gavinsimpson/ggvegan")
```

If that doesn’t work or you prefer to install from binaries, the R
Universe service run by rOpenSci now provides binaries. Instruction on
how to install ggvegan from that repository are:

``` r
# Enable repository from gavinsimpson
options(repos = c(
  gavinsimpson = "https://gavinsimpson.r-universe.dev",
  CRAN = "https://cloud.r-project.org"))
# Download and install ggvegan in R
install.packages("ggvegan")
```

# Package index

## Automatic plotting with `autoplot()`

Functions for producing complete plots of *vegan* objects using
*ggplot2*

- [`autoplot(`*`<anosim>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.anosim.md)
  :

  ggplot-based plot for objects of class `"anosim"`

- [`autoplot(`*`<cca>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.cca.md)
  :

  ggplot-based plot for objects of class `"cca"`

- [`autoplot(`*`<dbrda>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.dbrda.md)
  :

  ggplot-based plot for objects of class `"dbrda"`

- [`autoplot(`*`<decorana>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.decorana.md)
  :

  ggplot-based plot for objects of class `"decorana"`

- [`autoplot(`*`<envfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.envfit.md)
  :

  ggplot-based plot for `envfit` objects

- [`autoplot(`*`<fisherfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.fisherfit.md)
  : Plot Fisher's log-series

- [`autoplot(`*`<isomap>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.isomap.md)
  :

  ggplot-based plot for objects of class `"isomap"`

- [`autoplot(`*`<metaMDS>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.metaMDS.md)
  :

  ggplot-based plot for objects of class `"metaMDS"`

- [`autoplot(`*`<permustats>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.permustats.md)
  : Autoplot Graphics for vegan permustats Objects

- [`autoplot(`*`<poolaccum>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.poolaccum.md)
  :

  ggplot-based plot for objects of class `"poolaccum"`

- [`autoplot(`*`<prc>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.prc.md)
  :

  ggplot-based plot for objects of class `"prc"`

- [`autoplot(`*`<prestonfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.prestonfit.md)
  : Plot Preston's log-normal model of species abundance

- [`autoplot(`*`<rda>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.rda.md)
  :

  ggplot-based plot for objects of class `'rda'`

- [`autoplot(`*`<vegan_pco>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/autoplot.vegan_pco.md)
  :

  ggplot-based plot for objects of class `"vegan_pco"`

## Tidy *vegan* objects

Functions tidying *vegan* objects with
[`tidy()`](https://generics.r-lib.org/reference/tidy.html) or
[`fortify()`](https://ggplot2.tidyverse.org/reference/fortify.html).

- [`fortify(`*`<anosim>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.anosim.md)
  [`tidy(`*`<anosim>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.anosim.md)
  : Fortify analysis of similarities (ANOSIM) results

- [`fortify(`*`<cca>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.cca.md)
  [`tidy(`*`<cca>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.cca.md)
  :

  Fortify a `"cca"` object.

- [`fortify(`*`<dbrda>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.dbrda.md)
  [`tidy(`*`<dbrda>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.dbrda.md)
  :

  Fortify a `"dbrda"` object.

- [`fortify(`*`<decorana>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.decorana.md)
  [`tidy(`*`<decorana>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.decorana.md)
  :

  Fortify a `"decorana"` object.

- [`fortify(`*`<envfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.envfit.md)
  [`tidy(`*`<envfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.envfit.md)
  :

  Fortify method for `envfit` objects

- [`fortify(`*`<fisherfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.fisherfit.md)
  [`tidy(`*`<fisherfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.fisherfit.md)
  : Tidied species rank abundance data and estimated Fisher's log-series

- [`fortify(`*`<isomap>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.isomap.md)
  [`tidy(`*`<isomap>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.isomap.md)
  : Fortify isometric feature mapping results

- [`fortify(`*`<metaMDS>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.metaMDS.md)
  [`tidy(`*`<metaMDS>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.metaMDS.md)
  :

  Fortify a `"mataMDS"` object.

- [`fortify(`*`<permustats>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.permustats.md)
  [`tidy(`*`<permustats>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.permustats.md)
  : Fortify permutation statistics

- [`fortify(`*`<poolaccum>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.poolaccum.md)
  [`tidy(`*`<poolaccum>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.poolaccum.md)
  : Fortify extrapolated species richness of a species pool

- [`fortify(`*`<prc>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.prc.md)
  [`tidy(`*`<prc>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.prc.md)
  :

  Fortify a `"prc"` object

- [`fortify(`*`<prestonfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.prestonfit.md)
  [`tidy(`*`<prestonfit>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.prestonfit.md)
  : Tidied species octave abundance data

- [`fortify(`*`<rda>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.rda.md)
  [`tidy(`*`<rda>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.rda.md)
  :

  Fortify a `"rda"` object.

- [`fortify(`*`<renyiaccum>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.renyiaccum.md)
  [`tidy(`*`<renyiaccum>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.renyiaccum.md)
  : Fortify Rényi accumulation curves

- [`fortify(`*`<vegan_pco>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.vegan_pco.md)
  [`tidy(`*`<vegan_pco>`*`)`](https://gavinsimpson.github.io/ggvegan/reference/fortify.vegan_pco.md)
  :

  Fortify a `"vegan_pco"` object.

## Manually plotting ordination diagrams

More control over plotting of ordination diagrams can be achieved using
[`ordiggplot()`](https://gavinsimpson.github.io/ggvegan/reference/ordiggplot.md)
and the custom *geoms* provided by *ggvegan*

- [`ordiggplot()`](https://gavinsimpson.github.io/ggvegan/reference/ordiggplot.md)
  [`ggscores()`](https://gavinsimpson.github.io/ggvegan/reference/ordiggplot.md)
  : Create a ggplot Object

## Geoms

geoms for use with
[`ordiggplot()`](https://gavinsimpson.github.io/ggvegan/reference/ordiggplot.md).

- [`geom_ordi_arrow()`](https://gavinsimpson.github.io/ggvegan/reference/geom_ordi_arrow.md)
  : Add a biplot arrow layer to an ordiggplot
- [`geom_ordi_axis()`](https://gavinsimpson.github.io/ggvegan/reference/geom_ordi_axis.md)
  : Crosshair for axes in eigenvector methods
- [`geom_ordi_label()`](https://gavinsimpson.github.io/ggvegan/reference/geom_ordi_label.md)
  : Add a label layer to an ordiggplot
- [`geom_ordi_point()`](https://gavinsimpson.github.io/ggvegan/reference/geom_ordi_point.md)
  : Add a point layer to an ordiggplot
- [`geom_ordi_text()`](https://gavinsimpson.github.io/ggvegan/reference/geom_ordi_text.md)
  : Add a text layer to an ordiggplot

## Stats

stats for use with
[`ordiggplot()`](https://gavinsimpson.github.io/ggvegan/reference/ordiggplot.md).

- [`stat_vectorfit()`](https://gavinsimpson.github.io/ggvegan/reference/stat_vectorfit.md)
  : Add Fitted Vectors to Ordination plots

## Utility functions

Functions that provide utilities or helpers.

- [`add_biplot_arrows()`](https://gavinsimpson.github.io/ggvegan/reference/add_biplot_arrows.md)
  : Adds a biplot arrow layer to an existing plot
- [`add_biplot_centroids()`](https://gavinsimpson.github.io/ggvegan/reference/add_biplot_centroids.md)
  : Adds a biplot arrow layer to an existing plot
- [`add_spp_site_scores()`](https://gavinsimpson.github.io/ggvegan/reference/add_spp_site_scores.md)
  : Adds species and site score layers to an existing plot
- [`arrow_mul()`](https://gavinsimpson.github.io/ggvegan/reference/arrow_mul.md)
  : Scale Vectors to Data
- [`check_user_layers()`](https://gavinsimpson.github.io/ggvegan/reference/check_user_layers.md)
  : Check user-supplied layers against list of valid layers
- [`get_dimension_names()`](https://gavinsimpson.github.io/ggvegan/reference/get_dimension_names.md)
  : Extract the names of the dimensions to plot as a character vector
- [`label_fun()`](https://gavinsimpson.github.io/ggvegan/reference/label_fun.md)
  : Adds a label layer using one of a set of common geoms
- [`layer_draw_list()`](https://gavinsimpson.github.io/ggvegan/reference/layer_draw_list.md)
  : List of layers to draw for a given vegan object
- [`scores_length()`](https://gavinsimpson.github.io/ggvegan/reference/scores_length.md)
  : Number of scores
- [`valid_layers()`](https://gavinsimpson.github.io/ggvegan/reference/valid_layers.md)
  : Valid layers for vegan objects

